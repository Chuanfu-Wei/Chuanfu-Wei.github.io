实习笔记
=================
> (!improtent) 每次做项目 -> 系统目录要对应 -> 要在本地操作(localhost) -> 放入数据库和config配置文件
## 系统
### 订单
*  订单信息 -> 就录入客户啊，理单员就一些客户信息嘛
*  产品明细 -> 新增一下分色明细，选一下颜色、工艺这些，工艺就是要进行哪些加工嘛，然后成品数比如输入1200米，后面会有百分之多少的损耗，就比如10%的损耗，那我们就需要1320米去进行加工生产；然后是额外费用，就比如这个小缸费，就是在染厂布是需要装入一个一个缸去加工的，所以这是需要缸费的
*  供应商 -> 这边就是我们的布要从哪个厂去采购这些布嘛，然后选择供应商，采购员是谁，单价比如2元，总共需要多少钱，还有这个坯布代号，就是这个布是有个编号的嘛，然后还有一些基础信息
*  染厂 -> 我们的布采购过来就要进染厂染色嘛，染厂工艺嘛就是要在染厂要干什么，然后跟单员是谁，染厂单价比如3元，就算出总共金额，然后还有一些都是根据具体实际情况选填的，带星号的是必填的
*  后整 -> 就是坯布从染厂出来，需要入库检验，检验完了然后可能还需要后整，后整是什么呢，就必须印花啊这些就需要后整，然后这边就在系统里新增，如如一些后整厂的信息，跟单员、工艺、数量、单价，然后总共多少钱，好了就保存
### 采购
*  ->下推到采购，然后采购员就根据这份采购计划单去采购


## 操作
> 说明：init和edit(add)都去找tpl，数据网格表都是cache里面找，AJAX打开的弹窗也是tpl，蓝色的数据网格表头就是cache，整张窗口的html都装在tpl里，只是其中引入了cache
### 项目处理
*   拉项目：新建项目 -> 云端 -> 搜索 -> 克隆 -> 在dev里拉取 -> 切换回dev
*   提交项目：暂存所有+备注 -> 提交 -> 推送 -> 在deploy拉取dev -> 没合上再拉master -> 推送 -> 切换回dev
### 页面处理
1.  鼠标右击 -> 属性 -> 查询到地址(m/c/a) -> 定位到位置
2.  寻找页面位置失败(找不到tpl或者cache的页面) -> 查找php文件[属性查询到地址(m/c)] -> 在php文件里查找方法[地址(a)] -> [include template('edit')] -> 查询到地址(m/c/edit) -> 成功找到tpl/cache文件
3.  填写报表数据时(拿不到数据) -> model对应的表拿错了 -> 去php文件里查找方法[地址(a)] -> [$this->qitem] -> 文件顶部找到模型[M('indent_quotation_item_model')] -> 即对应的正确的表
### 报表操作
1.  添加报表 -> 现在页面找到数据网格对应的cache页面 -> 添加报表样式 -> 复制其他报表名称找到报表放的目录 -> 把报表放入 -> 填字段数据
### 数据获取！！！
*   要将012改成具体具体对应的数据，就要去找model模型里面fieldAndJoin() //外链
    + 查到数据必须要输出数据，如果fieldAndJoin这里面没有的方法，就直接写进去，命名规范
        + $zdata=$sale_retail_model
            ->where("{$sale_retail_model->alias}.id",$id)
            ->fieldAndJoin()
            ->fetchList();
    + 要将012改成具体具体对应的数据，就要去找model模型里面fieldAndJoin(),找到后再加个namejoin();
        + $item = M('indent_quotation_item_model')
            ->fieldAndJoin()
            ->where('fk_' , $value['id'])
            ->fetchList();
> 如果是搜索框则用join，如果是下拉框就要去php文件model模型找fieldAndJoin()，然后在里面写入以下数据
* $return=$this->caseArray("return_",getcache('return', 'commons'));
* ->field($return,'return_name') //输出语句
* 即：->field($this->caseArray("return_",getcache('return', 'commons')),'return_name')
### 关联表拿数据
* 直接去需要数据所在页面 -> 找到对应位置php文件 -> 拿到model模型对应表
  1. 主表：`$this->indent = M('indent_order_model');`
  2. 页面第二张数据明细表：`$this->item = M('indent_order_item_model');`
* 去数据库找到表里需要字段的名称(X)：`$data= M('indent_order_model')->where('X',$gdata['customcode'])->fetchList()/fetchOne()/select();`
* 拿到数据：`dump($data);`
### 常用代码
* 匹数：`$total_volume += 1;`
* 米数：`$total_quantity += $qtys[$key];`